<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>$PROJECT_NAME$</title>
  <style>
    .title {
      font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
      text-align: center;
      font-size: 24px;
    }

    .results {
      font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
      border-collapse: collapse;
      width: 70%;
      text-align: center;
      margin-left: auto;
      margin-right: auto;
    }

    .results td, .results th {
      border: 1px solid #ddd;
      padding: 8px;
    }

    .results tr:nth-child(even) {
      background-color: #f2f2f2;
    }

    .results th {
      padding-top: 12px;
      padding-bottom: 12px;
      text-align: center;
      background-color: #0066cc;
      color: white;
    }

    .trend-symbol {
      font-size: 32px;
      font-weight: bold;
    }
  </style>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.js"></script>
  <script type="text/javascript">

    $(document).ready(function () {
      $('#result td.percentage').each(function () {
        const percentageValue = parseFloat($(this).text());
        if (percentageValue >= 20) {
          $(this).css('background-color', '#ff4d4d');
        } else if (percentageValue >= 15 && percentageValue < 20) {
          $(this).css('background-color', '#ff9966');
        } else {
          $(this).css('background-color', '#8cd98c');
        }
      });

      $('#trend td.impact').each(function () {
        if ($(this).text() == 'High') {
          $(this).css('background-color', '#ff4d4d');
        } else if ($(this).text() == 'Medium') {
          $(this).css('background-color', '#ff9966');
        } else {
          $(this).css('background-color', '#8cd98c');
        }
      });

      $('#trend td.arrow').each(function () {
        if ($(this).text() == '↗') {
          $(this).css('color', '#ff4d4d');
        } else if ($(this).text() == '↘') {
          $(this).css('color', '#8cd98c');
        } else {
          $(this).css('color', '#3366cc');
        }
      });
    });

  </script>
</head>

<body>

<p class="title">DuDe analysis results on <span style="color: #0066cc;">$PROJECT_NAME$</span> project for build number
  <span style="color: #0066cc;">$CURRENT_BUILD_NUMBER$</span>:</p>

<br/>
<br/>
<table id="result" class="results">
  <tr>
    <th>Files analysed</th>
    <th>Duplicated fragments</th>
    <th>Number of files with duplicated fragments</th>
    <th>Percentage of files with duplicates</th>
  </tr>
  <tr>
    <td>$NUMBER_OF_FILES_ANALYSED$</td>
    <td>$NUMBER_OF_DUPLICATED_CODE_FRAGMENTS$</td>
    <td>$NUMBER_OF_FILES_CONTAINING_DUPLICATE_FRAGMENTS$</td>
    <td class="percentage">$PERCENTAGE_OF_FILES_ANALYSED_THAT_HAVE_DUPLICATE_FRAGMENTS$ %</td>
  </tr>
</table>

<br/>
<br/>

<p class="title">Duplication fragments analysis</p>

<table class="results">
  <tr>
    <th></th>
    <th>Total LOC</th>
    <th>Actual LOC</th>
    <th>Number of files having this duplication</th>
    <th>Files having this duplication fragment</th>
  </tr>
  <tr>
    <td style="width: 25%;">Duplication fragment with most LOC</td>
    <td>$DUPLICATION_FRAGMENT_WITH_MOST_LOC_TOTAL_LOC$</td>
    <td style="background-color: #ff9966">$DUPLICATION_FRAGMENT_WITH_MOST_LOC_ACTUAL_LOC$</td>
    <td>$DUPLICATION_FRAGMENT_WITH_MOST_LOC_FILES_COUNT$</td>
    <td style="text-align: left;">$DUPLICATION_FRAGMENT_WITH_MOST_LOC_FILES$</td>
  </tr>
  <tr>
    <td>Duplication fragment present in most files</td>
    <td>$DUPLICATION_FRAGMENT_PRESENT_IN_MOST_FILES_TOTAL_LOC$</td>
    <td>$DUPLICATION_FRAGMENT_PRESENT_IN_MOST_FILES_ACTUAL_LOC$</td>
    <td style="background-color: #ff9966">$DUPLICATION_FRAGMENT_PRESENT_IN_MOST_FILES_FILES_COUNT$</td>
    <td style="text-align: left;">$DUPLICATION_FRAGMENT_PRESENT_IN_MOST_FILES_FILES$</td>
  </tr>
</table>

<br/>
<br/>

<p class="title">Duplication trend analysis</p>

<table id="trend" class="results">
  <tr>
    <th>Previous build duplication percentage</th>
    <th>Current build duplication percentage</th>
    <th>Duplication Trend</th>
    <th>Duplication Impact</th>
  </tr>
  <tr>
    <td>$PREVIOUS_PERCENTAGE_OF_FILES_ANALYSED_THAT_HAVE_DUPLICATE_FRAGMENTS$ %</td>
    <td>$PERCENTAGE_OF_FILES_ANALYSED_THAT_HAVE_DUPLICATE_FRAGMENTS$ %</td>
    <td class="arrow trend-symbol"><span>$DUPLICATION_TREND$</span></td>
    <td class="impact">$DUPLICATION_IMPACT$</td>
  </tr>
</table>
</body>
</html>
